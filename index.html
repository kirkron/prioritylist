<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  	<meta name="description" content="Struggling to decide? Overwhelmed by the possible outcomes? Don't worry. Itemeaser is here to help you with your decision paralysis - one tiny decision at a time." />
    <meta name="google-site-verification" content="QfkG1V4MuMCmgi2jBSE1LVUJ6cwA7n6Q0g0wtKWDeB8" />
    <title>Itemeaser ðŸ˜Œ - Fight decision paralysis - one tiny decision at a time.</title>
	
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Itemeaser ðŸ˜Œ - Fight Decision Paralysis - One Tiny Decision at a Time">
    <meta property="og:description" content="Struggling to decide? Overwhelmed by the possible outcomes? Don't worry. Itemeaser is here to help you with your decision paralysis - one tiny decision at a time.">
    <meta property="og:image" content="https://itemeaser.com/icon512.png">
    <meta property="og:url" content="https://itemeaser.com">
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Itemeaser ðŸ˜Œ - Fight Decision Paralysis - One Tiny Decision at a Time">
    <meta name="twitter:description" content="Struggling to decide? Overwhelmed by the possible outcomes? Don't worry. Itemeaser is here to help you with your decision paralysis - one tiny decision at a time.">
    <meta name="twitter:image" content="https://itemeaser.com/icon512.png">

    <link href="materialize/css/materialize.min.css" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" sizes="512x512" href="/icon512.png">
    <link rel="icon" type="image/png" sizes="512x512"  href="/icon512.png">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <a style="color:#ffffff" href="index.html"><h1 class="centered">Itemeaser <img style="height: 1em; position: relative; bottom: -0.16em" src="icon512.png"/></h1></a>
        <p class="centered" id="tagline">Struggling to decide? Overwhelmed by the possible outcomes? Don't worry. Itemeaser is here to help you with your decision paralysis! Just list your options and Itemeaser will guide you through the process of ordering them - one tiny decision at a time.</p>
        <div id="step-1">
            <div class="input-field">
                <input type="text" id="task-input" placeholder="Enter an item to prioritize." onkeypress="handleKeyPress(event)">
                <label for="task-input">Item</label>
            </div>
            <ul class="collection" id="task-list"></ul>
            <div class="action-buttons">
                <button class="btn waves-effect waves-light grey darken-3" onclick="resetTasks()">Reset</button>
                <button class="btn waves-effect waves-light blue lighten-2" onclick="shareTasks()">Share List</button>
                
                <button class="btn waves-effect waves-light" onclick="addTask()">Add Item</button>
                <button class="btn waves-effect waves-light red lighten-2" onclick="confirmTasks()">Compare Items</button>
            </div>
            <div class="row">
                <div class="col s12">
                    <ul class="collapsible">
                    <li>
                      <h3 class="collapsible-header">What is Decision Paralysis?</h3>
                      <div class="collapsible-body"><span>Decision paralysis, also known as analysis paralysis, choice overload or decision fatigue, is a state of overthinking and indecision that occurs when faced with numerous choices. The overwhelming nature of the options can lead to difficulty making a decision or complete avoidance of making any choice at all. This can be particularly frustrating when the decisions are seemingly minor but still cause significant stress and delay.</span></div>
                    </li>
                    <li>
                      <h3 class="collapsible-header">Conditions Associated with Decision Paralysis</h3>
                      <div class="collapsible-body">
                        <span>
                          Decision paralysis can be a symptom of various psychological and cognitive conditions. Some of these include:
                          <ul>
                            <li><b>Anxiety Disorders:</b> Individuals with anxiety may struggle with decision paralysis due to excessive worry about making the wrong choice or fear of negative consequences.</li>
                            <li><b>Obsessive-Compulsive Disorder (OCD):</b> People with OCD may experience decision paralysis as a result of their compulsions and need for certainty and perfection.</li>
                            <li><b>Attention Deficit Hyperactivity Disorder (ADHD):</b> Those with ADHD may find it challenging to prioritize tasks or decisions due to difficulties in focusing and organizing.</li>
                            <li><b>Depression:</b> Depression can cause a lack of motivation and energy, making decision-making feel like an insurmountable task.</li>
                            <li><b>Perfectionism:</b> The desire to make the "perfect" choice can lead to extensive deliberation and hesitation, resulting in decision paralysis.</li>
                          </ul>
                        </span>
                      </div>
                    </li>
                    <li>
                      <h3 class="collapsible-header">How Itemeaser Helps</h3>
                      <div class="collapsible-body"><span>Itemeaser aims to alleviate decision paralysis by simplifying the decision-making process. By breaking down a complex list of options into smaller, manageable comparisons, Itemeaser reduces the cognitive load and stress associated with making choices. Instead of trying to order an entire list at once, users can make decisions one pair at a time, making the process feel less daunting and more manageable.<br><br>Remember, it's much easier to decide between two options than to order the whole list in one go! We hope Itemeaser helps you navigate through your decision paralysis with ease and confidence.</span></div>
                    </li>
                    <li>
                      <h3 class="collapsible-header">How to use Itemeaser to Fight Decision Paralysis</h3>
                      <div class="collapsible-body">
                        <p> Enter each item on your list by writing it down and pressing "Add Item" or the "Enter"-Key. Then, click "Compare Items". Itemeaser will randomly pick a pair of two items for you to decide between. Pick one - depending on what matters to you right now, or by gut feeling - and continue until you've compared all pairs. Itemeaser then shows you the final, ordered list of items based on your comparisons.</p>
                        <p> You can even help someone else with their decision paralysis by creating a list for them and sharing it with them using the share function - either before clicking "Compare Items" for them to do the comparison by themselves, or after comparing the tasks for them. </p>
                        <p> Prioritizing tasks? You can add the tasks to your calendar once you have prioritized them. The "Add to Calendar" button will create a one-hour block for each item and set up an .ics file which you can import into your preferred calendar app! </p>
                      </div>
                    </li>
                  </ul>
                </div>
            </div>
        </div>
        <div id="step-2" class="hidden">
            <h2 class="centered">Compare Items</h2>
            <p class="centered">Pick an Item.</p>
            <div class="centered">
                <button class="btn waves-effect waves-light" id="left-button" onclick="chooseTask('left')"></button>
                <button class="btn waves-effect waves-light" id="right-button" onclick="chooseTask('right')"></button>
            </div>
        </div>
        <div id="step-3" class="hidden">
            <div class="row">
                <div class="col s12">
                    <div class="card">
                        <div class="card-content">
                            <h2 class="card-title">Ordered Items</h2>
                            <ul class="collection" id="ordered-tasks"></ul>
                            <button class="btn waves-effect waves-light green lighten-2" onclick="addToCalendar()">Add to Calendar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="input-field">
                <input type="text" id="task-input-3" placeholder="Enter an item to prioritize." onkeypress="handleKeyPress3(event)">
                <label for="task-input-3">Item</label>
            </div>
            <ul class="collection" id="task-list-3"></ul>
            <div class="action-buttons">
                <button class="btn waves-effect waves-light grey darken-3" onclick="resetTasks()">Reset</button>
                <button class="btn waves-effect waves-light blue lighten-2" onclick="shareTasks()">Share List</button>
                
                <button class="btn waves-effect waves-light" onclick="addTask3()">Add Item</button>
                <button class="btn waves-effect waves-light red lighten-2" onclick="confirmTasks()">Compare Items</button>
            </div>
        </div>
        <footer>
            <a href="imprint.html">Imprint/Impressum</a>            
            <a href="privacy-policy.html">Privacy Policy</a>
        </footer>
    </div>

    <script src="materialize/js/materialize.min.js"></script>
    <script src="lz-string//lz-string.min.js"></script>

    <script>
		document.addEventListener('DOMContentLoaded', function() {
          var elems = document.querySelectorAll('.collapsible');
          var instances = M.Collapsible.init(elems);
        });
      
        let tasks = [];
        let comparisons = [];
        let comparisonIndex = 0;
        let taskColors = [];
        let completedTasks = new Set();

        function loadFromURL() {
            const params = new URLSearchParams(window.location.search);
            if (params.has('data')) {
                try {
                    const encodedParams = params.get('data');
                    const decompressedParams = LZString.decompressFromEncodedURIComponent(encodedParams);
                    const parsedParams = JSON.parse(decompressedParams);
                    
                    tasks = parsedParams.tasks;
                    taskColors = parsedParams.colors;
                    completedTasks = new Set(parsedParams.completed);
                    comparisons = parsedParams.comparisons;

                    updateTaskList();
                    updateTaskList3();
                    if (tasks.length > 1 && comparisons.length > 0) {
                        calculatePrioritization();
                        document.getElementById('step-1').classList.add('hidden');
                        document.getElementById('step-3').classList.remove('hidden');
                        document.getElementById('tagline').classList.add('hidden');
                    }
                } catch (e) {
                    console.error('Failed to parse URL parameters:', e);
                }
            } else if (localStorage.getItem('params')) {
                history.replaceState(null, '', `?data=${localStorage.getItem('params')}`);
                window.location.reload();
            }
        }


        function updateURL() {
            const params = {
                tasks: tasks,
                colors: taskColors,
                completed: [...completedTasks],
                comparisons: comparisons
            };
            const paramsString = JSON.stringify(params);
            const compressedParams = LZString.compressToEncodedURIComponent(paramsString);
            localStorage.setItem('params', compressedParams);
            history.replaceState(null, '', `?data=${compressedParams}`);
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                addTask();
            }
        }

        function handleKeyPress3(event) {
            if (event.key === 'Enter') {
                addTask3();
            }
        }

        function addTask() {
            const taskInput = document.getElementById('task-input');
            const task = taskInput.value.trim();
            if (task) {
                tasks.push(task);
                taskColors.push(generateColor(tasks.length - 1));
                taskInput.value = '';
                updateTaskList();
                updateTaskList3();
                updateURL();
            }
        }

        function addTask3() {
            const taskInput = document.getElementById('task-input-3');
            const task = taskInput.value.trim();
            if (task) {
                tasks.push(task);
                taskColors.push(generateColor(tasks.length - 1));
                taskInput.value = '';
                updateTaskList();
                updateTaskList3();
                updateURL();
            }
        }

        function updateTaskList() {
            const taskList = document.getElementById('task-list');
            taskList.innerHTML = '';
            tasks.forEach((task, index) => {
                const li = document.createElement('li');
                li.className = 'collection-item';
                li.style.backgroundColor = taskColors[index];
                li.innerHTML = `
                    ${task}
                    <button class="btn-flat" onclick="removeTask(${index})">&#128465;</button>
                `;
                taskList.appendChild(li);
            });
        }

        function updateTaskList3() {
            const taskList3 = document.getElementById('task-list-3');
            taskList3.innerHTML = '';
            tasks.forEach((task, index) => {
                const li = document.createElement('li');
                li.className = 'collection-item';
                li.style.backgroundColor = taskColors[index];
                li.innerHTML = `
                    ${task}
                    <button class="btn-flat" onclick="removeTask(${index})">&#128465;</button>
                `;
                taskList3.appendChild(li);
            });
        }

        function generateColor(index) {
            const colors = [
                '#ff8a80', '#ff5252', '#ff1744', '#d50000',
                '#ff80ab', '#ff4081', '#f50057', '#c51162',
                '#ea80fc', '#e040fb', '#d500f9', '#aa00ff',
                '#b388ff', '#7c4dff', '#651fff', '#6200ea'
            ];
            return colors[index % colors.length];
        }

        function confirmTasks() {
            if (tasks.length > 1) {
                document.getElementById('step-1').classList.add('hidden');
                document.getElementById('step-3').classList.add('hidden');                
                document.getElementById('tagline').classList.add('hidden');

                prepareComparisons();
                document.getElementById('step-2').classList.remove('hidden');
            } else {
                alert('Please add at least two tasks.');
            }
        }

        function prepareComparisons() {
            comparisons = [];
            for (let i = 0; i < tasks.length; i++) {
                for (let j = i + 1; j < tasks.length; j++) {
                    comparisons.push({ left: i, right: j });
                }
            }
            shuffleArray(comparisons);
            comparisonIndex = 0;
            showComparison();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function showComparison() {
            if (comparisonIndex < comparisons.length) {
                const comp = comparisons[comparisonIndex];
                const leftButton = document.getElementById('left-button');
                const rightButton = document.getElementById('right-button');
                leftButton.textContent = tasks[comp.left];
                rightButton.textContent = tasks[comp.right];
                leftButton.style.backgroundColor = taskColors[comp.left];
                rightButton.style.backgroundColor = taskColors[comp.right];
            } else {
                document.getElementById('step-2').classList.add('hidden');
                calculatePrioritization();
                document.getElementById('step-3').classList.remove('hidden');
            }
        }

        function chooseTask(choice) {
            const comp = comparisons[comparisonIndex];
            if (choice === 'left') {
                comp.winner = comp.left;
            } else {
                comp.winner = comp.right;
            }
            comparisonIndex++;
            updateURL();
            showComparison();
        }

        function calculatePrioritization() {
            const scores = new Array(tasks.length).fill(0);
            comparisons.forEach(comp => {
                if (comp.winner !== undefined) {
                    scores[comp.winner]++;
                }
            });
            const orderedTasks = tasks.map((task, index) => ({ task, score: scores[index], color: taskColors[index] }))
                .sort((a, b) => b.score - a.score);
            displayResults(orderedTasks);
        }

        function displayResults(orderedTasks) {
            const orderedList = document.getElementById('ordered-tasks');
            orderedList.innerHTML = '';
            const maxScore = Math.max(...orderedTasks.map(task => task.score));
            orderedTasks.forEach(({ task, score, color }, index) => {
                const li = document.createElement('li');
                li.className = 'collection-item list-item-wrapper';
                const checkboxId = `checkbox-${index}`;
                li.innerHTML = `
                    <label>
                        <input type="checkbox" id="${checkboxId}" ${completedTasks.has(task) ? 'checked' : ''} onclick="toggleCompletion('${task}')">
                        <span class="${completedTasks.has(task) ? 'completed-task' : ''}">${task} (Score: ${score})</span>
                    </label>
                    <div class="bar" style="width: ${(score / maxScore) * 100}%; background-color: ${color};"></div>
                    <button class="btn-flat" onclick="removeResult(${index})">&#128465;</button>
                `;
                orderedList.appendChild(li);
            });
            updateURL(); // Update URL after displaying results
        }

        function toggleCompletion(task) {
            if (completedTasks.has(task)) {
                completedTasks.delete(task);
            } else {
                completedTasks.add(task);
            }
            displayResults(calculateOrderedTasks());
        }

        function removeTask(index) {
            tasks.splice(index, 1);
            taskColors.splice(index, 1);
            completedTasks = new Set([...completedTasks].filter(task => tasks.includes(task)));
            updateTaskList();
            updateTaskList3();
            updateURL(); // Update URL after removing a task
        }

        function removeResult(index) {
            const orderedTasks = document.getElementById('ordered-tasks').children;
            if (index >= 0 && index < orderedTasks.length) {
                const task = orderedTasks[index];
                const taskName = task.textContent.split(' (')[0].trim();
                const taskIndex = tasks.indexOf(taskName);
                if (taskIndex > -1) {
                    tasks.splice(taskIndex, 1);
                    taskColors.splice(taskIndex, 1);
                    completedTasks = new Set([...completedTasks].filter(task => tasks.includes(task)));
                    updateTaskList();
                    updateTaskList3();
                    displayResults(calculateOrderedTasks());
                    updateURL(); // Update URL after removing a result
                }
            }
        }

        function calculateOrderedTasks() {
            const scores = new Array(tasks.length).fill(0);
            comparisons.forEach(comp => {
                if (comp.winner !== undefined) {
                    scores[comp.winner]++;
                }
            });
            return tasks.map((task, index) => ({ task, score: scores[index], color: taskColors[index] }))
                .sort((a, b) => b.score - a.score);
        }

        function shareTasks() {
            const shareUrl = window.location.href;
            if (navigator.share) {
                navigator.share({
                    title: 'Task Prioritization',
                    text: 'Check out these tasks:',
                    url: shareUrl
                }).catch(error => console.error('Error sharing:', error));
            } else if (navigator.clipboard) {
                navigator.clipboard.writeText(shareUrl).then(() => {
                    alert('URL copied to clipboard!');
                }).catch(error => console.error('Error copying URL:', error));
            }
        }

        function addToCalendar() {
            const orderedTasks = calculateOrderedTasks();
            const now = new Date();
            const nextHour = new Date(now.setHours(now.getHours() + 1, 0, 0, 0));
            
            let icalContent = `BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Itemeaser//EN\nCALSCALE:GREGORIAN\n`;

            orderedTasks.forEach((task, index) => {
                const start = new Date(nextHour.getTime() + index * 60 * 60 * 1000);
                const end = new Date(start.getTime() + 60 * 60 * 1000);
                
                const startString = start.toISOString().replace(/[-:]/g, '').replace(/\.\d{3}/, '');
                const endString = end.toISOString().replace(/[-:]/g, '').replace(/\.\d{3}/, '');
                
                icalContent += `BEGIN:VEVENT\nSUMMARY:${task.task}\nDTSTART:${startString}Z\nDTEND:${endString}Z\nEND:VEVENT\n`;
            });

            icalContent += `END:VCALENDAR`;

            const blob = new Blob([icalContent], { type: 'text/calendar' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'tasks.ics';
            a.click();
            URL.revokeObjectURL(url);
        }

        function resetTasks() {
            tasks = [];
            comparisons = [];
            comparisonIndex = 0;
            taskColors = [];
            completedTasks = new Set();
            updateTaskList();
            updateTaskList3();
            document.getElementById('step-1').classList.remove('hidden');
            document.getElementById('tagline').classList.remove('hidden');
            document.getElementById('step-2').classList.add('hidden');
            document.getElementById('step-3').classList.add('hidden');
            updateURL();
        }

        // Initialize the app
        window.onload = loadFromURL;
    </script>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('service-worker.js').then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
</body>
</html>
